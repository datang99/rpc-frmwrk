include Makefile.init.pub

all: debug

debug:
	@if [ ! -e $(OUTPUT_DIR)/libcombase.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(DBG_DIR)/libcombase.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libipc.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(DBG_DIR)/libipc.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/librpc.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(DBG_DIR)/librpc.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libsslpt.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(DBG_DIR)/libsslpt.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libwspt.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(DBG_DIR)/libwspt.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libauth.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(DBG_DIR)/libauth.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/driver.json ]; then cd $(OUTPUT_DIR);ln -s ../../ipc/driver.json;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/authprxy.json ]; then cd $(OUTPUT_DIR);ln -s ../../rpc/security/authprxy.json;cd -;fi
	$(MAKE) -C helloworld
	$(MAKE) -C iftest
	$(MAKE) -C asynctst
	$(MAKE) -C smoketest
	$(MAKE) -C actcancel
	$(MAKE) -C evtest
	$(MAKE) -C inproc
	$(MAKE) -C katest
	$(MAKE) -C prtest
	$(MAKE) -C sftest
	$(MAKE) -C stmtest
	$(MAKE) -C router
	$(MAKE) -C btinrt

release:
	@if [ ! -e $(OUTPUT_DIR)/libcombase.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(RLS_DIR)/libcombase.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libipc.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(RLS_DIR)/libipc.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/librpc.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(RLS_DIR)/librpc.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libsslpt.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(RLS_DIR)/libsslpt.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libwspt.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(RLS_DIR)/libwspt.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/libauth.so ]; then cd $(OUTPUT_DIR);ln -s ../../$(RLS_DIR)/libauth.so;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/driver.json ]; then cd $(OUTPUT_DIR);ln -s ../../ipc/driver.json;cd -;fi
	@if [ ! -e $(OUTPUT_DIR)/authprxy.json ]; then cd $(OUTPUT_DIR);ln -s ../../rpc/security/authprxy.json;cd -;fi
	$(MAKE) -C helloworld release
	$(MAKE) -C iftest release
	$(MAKE) -C asynctst release
	$(MAKE) -C smoketest release
	$(MAKE) -C actcancel release
	$(MAKE) -C evtest release
	$(MAKE) -C inproc release
	$(MAKE) -C katest release
	$(MAKE) -C prtest release
	$(MAKE) -C sftest release
	$(MAKE) -C stmtest release
	$(MAKE) -C router release
	$(MAKE) -C btinrt release

clean:
	$(MAKE) -C helloworld clean
	$(MAKE) -C iftest clean
	$(MAKE) -C asynctst clean
	$(MAKE) -C smoketest clean
	$(MAKE) -C actcancel clean
	$(MAKE) -C evtest clean
	$(MAKE) -C inproc clean
	$(MAKE) -C katest clean
	$(MAKE) -C prtest clean
	$(MAKE) -C sftest clean
	$(MAKE) -C stmtest clean
	$(MAKE) -C router clean
	$(MAKE) -C btinrt clean

release_clean:
	$(MAKE) -C helloworld release_clean
	$(MAKE) -C iftest release_clean
	$(MAKE) -C asynctst release_clean
	$(MAKE) -C smoketest release_clean
	$(MAKE) -C actcancel release_clean
	$(MAKE) -C evtest release_clean
	$(MAKE) -C inproc release_clean
	$(MAKE) -C katest release_clean
	$(MAKE) -C prtest release_clean
	$(MAKE) -C sftest release_clean
	$(MAKE) -C stmtest release_clean
	$(MAKE) -C router release_clean
	$(MAKE) -C btinrt release_clean

debug_clean:
	$(MAKE) -C helloworld debug_clean
	$(MAKE) -C iftest debug_clean
	$(MAKE) -C asynctst debug_clean
	$(MAKE) -C smoketest debug_clean
	$(MAKE) -C actcancel debug_clean
	$(MAKE) -C evtest debug_clean
	$(MAKE) -C inproc debug_clean
	$(MAKE) -C katest debug_clean
	$(MAKE) -C prtest debug_clean
	$(MAKE) -C sftest debug_clean
	$(MAKE) -C stmtest debug_clean
	$(MAKE) -C router debug_clean
	$(MAKE) -C btinrt debug_clean

.PHONY: release clean debug_clean debug
