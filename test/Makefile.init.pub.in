mkfile_path := $(abspath $(lastword $(MAKEFILE_LIST)))
include $(dir $(mkfile_path))/../Makefile.init.pub

CUR_DIR := $(shell pwd)

C_DEFINES :=

C_INCLUDE += -I$(BASE)/ipc \
	-I$(BASE)/rpc \

OUTPUT_DIR := $(BASE)/test/$(DBG_DIR)
OBJ_DIR := ./$(DBG_DIR)
RPCLIB_DIR := $(BASE)/$(DBG_DIR)

ifeq ($(MAKECMDGOALS),release)
	OUTPUT_DIR := $(BASE)/test/$(RLS_DIR)
	RPCLIB_DIR := $(BASE)/$(RLS_DIR)
else ifeq ($(MAKECMDGOALS),debug_clean)
	OUTPUT_DIR := $(BASE)/test/$(DBG_DIR)
else ifeq ($(MAKECMDGOALS),release_clean)
	OUTPUT_DIR := $(BASE)/test/$(RLS_DIR)
	RPCLIB_DIR := $(BASE)/$(RLS_DIR)
endif

CPP_FLAGS += -D_USE_LIBEV=1
LINKER_OPTION := -L$(OUTPUT_DIR) $(WIDTH_FLAG) -L$(USER_LIB_PREFIX) -L$(LIB_PREFIX) -lipc -lcombase -Wl,-rpath=$(USER_LIB_PREFIX) -Wl,-rpath=$(LIB_PREFIX) -ldbus-1 -lcppunit -ljsoncpp -lstdc++ -ldl -lpthread
