include ./Makefile.init.pub

TARGETS := $(OUTPUT_DIR)/libcombase.so $(OUTPUT_DIR)/libipc.so $(OUTPUT_DIR)/librpc.so test

all: $(TARGETS)
debug: $(TARGETS)
release: $(TARGETS)
clean: $(TARGETS)
release_clean: $(TARGETS)
debug_clean: $(TARGETS)

mygoal:=$(MAKECMDGOALS)
$(OUTPUT_DIR)/libcombase.so :
	-make -j 3 -l 5 -C ./combase $(mygoal)
	
$(OUTPUT_DIR)/libipc.so :
	-make -j 3 -l 5 -C ./ipc $(mygoal)

$(OUTPUT_DIR)/librpc.so :
	-make -j 3 -l 5 -C ./rpc $(mygoal)

test:
	-make -j 3 -l 5 -C test $(mygoal)

.PHONY: $(TARGETS) test
